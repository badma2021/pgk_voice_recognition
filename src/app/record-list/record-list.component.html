<form [formGroup]="dynamicForm">


  <mat-form-field  [style.width.px]=90>
    <mat-select
      formControlName="currencyName"
      placeholder="Currency"
      (selectionChange)="onSearch2Change($event.value)">

      <mat-option

        *ngFor="let currencyName of currencyNames"

        [value]="currencyName">

        {{ currencyName }}

      </mat-option>

    </mat-select>

  </mat-form-field>
  <mat-form-field [style.width.px]=90
  >

    <input matInput type="text"  formControlName="exchangeRateToRuble"
           (change)="onSearchChange($any($event.target).value)"
           [value]="exchangeRateToRuble"
           placeholder="Rate"
          >




  </mat-form-field>
  <div>
    <div formArrayName="filters">

      <div
        *ngFor="let filter of filtersFormArray.controls; let i = index;">
<div>
        <div
          [formGroupName]="i"
          class="container">

          <mat-form-field [style.width.%]="40">
            <mat-select
              placeholder="Category"
              formControlName="filterType" class="myclass"

              (selectionChange)="onChangeCategory($event.value, i)">

              <mat-option

                *ngFor="let filterType of filterTypes"
                [value]="filterType.id">
                {{ filterType.categoryName }}

              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field [style.width.%]="40">
            <mat-select

              (selectionChange)="selectedAPIChanged(i)"
              placeholder="Expense"
              #apiField
              formControlName="expenseTitleId" class="myclass">
              <mat-option
                *ngFor="let expenseTitleId of expenseTitleIds[i]"
                [value]="expenseTitleId.id">
                {{ expenseTitleId.expenseName }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field [style.width.%]="32"
          >
            <input
              matInput
              placeholder="Amount"
              formControlName="amount" class="myclass"

            >
          </mat-form-field>
          <mat-icon
            (click)="removeFilterFromFiltersFormArray(i)">
            delete
          </mat-icon>

        </div>
        <div [formGroupName]="i"
  class="container">

          <mat-form-field [style.width.%]="60">
            <input matInput placeholder="Comment" formControlName="comment" [value]="comment">
          </mat-form-field>

        </div>
      </div>
      </div>
    </div>

    <button class="button"
      mat-raised-button
      color="primary"

      (click)="addFilterToFiltersFormArray()">
      Add Record
    </button>

    <button
      class="save"
      type="submit"
      mat-stroked-button
      color="primary"
      [disabled]="dynamicForm.invalid || filtersFormArray.controls.length < 1"
      (click)="save()">
      Save
    </button>

  </div>
</form>
